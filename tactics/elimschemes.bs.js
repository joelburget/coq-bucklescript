// Generated by BUCKLESCRIPT VERSION 2.2.2, PLEASE EDIT WITH CARE
'use strict';

var Curry = require("bs-platform/lib/js/curry.js");
var Evd$ReactTemplate = require("../src/evd.bs.js");
var Constr$ReactTemplate = require("../src/constr.bs.js");
var Global$ReactTemplate = require("../src/global.bs.js");
var Indrec$ReactTemplate = require("../src/indrec.bs.js");
var Typeops$ReactTemplate = require("../src/typeops.bs.js");
var Evarutil$ReactTemplate = require("../src/evarutil.bs.js");
var Ind_tables$ReactTemplate = require("./ind_tables.bs.js");
var Safe_typing$ReactTemplate = require("../src/safe_typing.bs.js");
var Inductiveops$ReactTemplate = require("../src/inductiveops.bs.js");

function optimize_non_type_induction_scheme(kind, dep, sort, _, ind) {
  var env = Global$ReactTemplate.env(/* () */0);
  var sigma = Evd$ReactTemplate.from_env(env);
  if (Ind_tables$ReactTemplate.check_scheme(kind, ind)) {
    var match = Ind_tables$ReactTemplate.find_scheme(/* None */0, kind, ind);
    var match$1 = Evd$ReactTemplate.fresh_constant_instance(/* None */0, env, sigma, match[0]);
    var cte = match$1[1];
    var c = Constr$ReactTemplate.mkConstU(cte);
    var t = Typeops$ReactTemplate.type_of_constant_in(Global$ReactTemplate.env(/* () */0), cte);
    var match$2 = Global$ReactTemplate.lookup_inductive(ind);
    var mib = match$2[0];
    var npars = Inductiveops$ReactTemplate.mis_is_recursive_subset(/* :: */[
          ind[1],
          /* [] */0
        ], match$2[1][/* mind_recargs */11]) ? mib[/* mind_nparams_rec */6] : mib[/* mind_nparams */5];
    var match$3 = Evd$ReactTemplate.fresh_sort_in_family(/* None */0, /* None */0, env, match$1[0], sort);
    var match$4 = Indrec$ReactTemplate.weaken_sort_scheme(env, match$3[0], /* false */0, match$3[1], npars, c, t);
    var match$5 = Evarutil$ReactTemplate.nf_evars_and_universes(match$4[0]);
    return /* tuple */[
            /* tuple */[
              Curry._1(match$5[1], match$4[2]),
              Evd$ReactTemplate.evar_universe_context(match$5[0])
            ],
            match[1]
          ];
  } else {
    var match$6 = Evd$ReactTemplate.fresh_inductive_instance(/* None */0, env, sigma, ind);
    var match$7 = Indrec$ReactTemplate.build_induction_scheme(env, match$6[0], match$6[1], dep, sort);
    return /* tuple */[
            /* tuple */[
              match$7[1],
              Evd$ReactTemplate.evar_universe_context(match$7[0])
            ],
            Safe_typing$ReactTemplate.empty_private_constants
          ];
  }
}

function build_induction_scheme_in_type(dep, sort, ind) {
  var env = Global$ReactTemplate.env(/* () */0);
  var sigma = Evd$ReactTemplate.from_env(env);
  var match = Evd$ReactTemplate.fresh_inductive_instance(/* None */0, env, sigma, ind);
  var match$1 = Indrec$ReactTemplate.build_induction_scheme(env, match[0], match[1], dep, sort);
  return /* tuple */[
          match$1[1],
          Evd$ReactTemplate.evar_universe_context(match$1[0])
        ];
}

var rect_scheme_kind_from_type = Ind_tables$ReactTemplate.declare_individual_scheme_object("_rect_nodep", /* None */0, (function (_, x) {
        return /* tuple */[
                build_induction_scheme_in_type(/* false */0, /* InType */2, x),
                Safe_typing$ReactTemplate.empty_private_constants
              ];
      }));

var rect_scheme_kind_from_prop = Ind_tables$ReactTemplate.declare_individual_scheme_object("_rect", /* Some */["_rect_from_prop"], (function (_, x) {
        return /* tuple */[
                build_induction_scheme_in_type(/* false */0, /* InType */2, x),
                Safe_typing$ReactTemplate.empty_private_constants
              ];
      }));

var rect_dep_scheme_kind_from_type = Ind_tables$ReactTemplate.declare_individual_scheme_object("_rect", /* Some */["_rect_from_type"], (function (_, x) {
        return /* tuple */[
                build_induction_scheme_in_type(/* true */1, /* InType */2, x),
                Safe_typing$ReactTemplate.empty_private_constants
              ];
      }));

var rec_scheme_kind_from_type = Ind_tables$ReactTemplate.declare_individual_scheme_object("_rec_nodep", /* Some */["_rec_nodep_from_type"], (function (param, param$1) {
        return optimize_non_type_induction_scheme(rect_scheme_kind_from_type, /* false */0, /* InSet */1, param, param$1);
      }));

var rec_scheme_kind_from_prop = Ind_tables$ReactTemplate.declare_individual_scheme_object("_rec", /* Some */["_rec_from_prop"], (function (param, param$1) {
        return optimize_non_type_induction_scheme(rect_scheme_kind_from_prop, /* false */0, /* InSet */1, param, param$1);
      }));

var rec_dep_scheme_kind_from_type = Ind_tables$ReactTemplate.declare_individual_scheme_object("_rec", /* Some */["_rec_from_type"], (function (param, param$1) {
        return optimize_non_type_induction_scheme(rect_dep_scheme_kind_from_type, /* true */1, /* InSet */1, param, param$1);
      }));

var ind_scheme_kind_from_type = Ind_tables$ReactTemplate.declare_individual_scheme_object("_ind_nodep", /* None */0, (function (param, param$1) {
        return optimize_non_type_induction_scheme(rec_scheme_kind_from_type, /* false */0, /* InProp */0, param, param$1);
      }));

var ind_dep_scheme_kind_from_type = Ind_tables$ReactTemplate.declare_individual_scheme_object("_ind", /* Some */["_ind_from_type"], (function (param, param$1) {
        return optimize_non_type_induction_scheme(rec_dep_scheme_kind_from_type, /* true */1, /* InProp */0, param, param$1);
      }));

var ind_scheme_kind_from_prop = Ind_tables$ReactTemplate.declare_individual_scheme_object("_ind", /* Some */["_ind_from_prop"], (function (param, param$1) {
        return optimize_non_type_induction_scheme(rec_scheme_kind_from_prop, /* false */0, /* InProp */0, param, param$1);
      }));

function build_case_analysis_scheme_in_type(dep, sort, ind) {
  var env = Global$ReactTemplate.env(/* () */0);
  var sigma = Evd$ReactTemplate.from_env(env);
  var match = Evd$ReactTemplate.fresh_inductive_instance(/* None */0, env, sigma, ind);
  var match$1 = Indrec$ReactTemplate.build_case_analysis_scheme(env, match[0], match[1], dep, sort);
  return /* tuple */[
          match$1[1],
          Evd$ReactTemplate.evar_universe_context(match$1[0])
        ];
}

var case_scheme_kind_from_type = Ind_tables$ReactTemplate.declare_individual_scheme_object("_case_nodep", /* None */0, (function (_, x) {
        return /* tuple */[
                build_case_analysis_scheme_in_type(/* false */0, /* InType */2, x),
                Safe_typing$ReactTemplate.empty_private_constants
              ];
      }));

var case_scheme_kind_from_prop = Ind_tables$ReactTemplate.declare_individual_scheme_object("_case", /* Some */["_case_from_prop"], (function (_, x) {
        return /* tuple */[
                build_case_analysis_scheme_in_type(/* false */0, /* InType */2, x),
                Safe_typing$ReactTemplate.empty_private_constants
              ];
      }));

var case_dep_scheme_kind_from_type = Ind_tables$ReactTemplate.declare_individual_scheme_object("_case", /* Some */["_case_from_type"], (function (_, x) {
        return /* tuple */[
                build_case_analysis_scheme_in_type(/* true */1, /* InType */2, x),
                Safe_typing$ReactTemplate.empty_private_constants
              ];
      }));

var case_dep_scheme_kind_from_type_in_prop = Ind_tables$ReactTemplate.declare_individual_scheme_object("_casep_dep", /* None */0, (function (_, x) {
        return /* tuple */[
                build_case_analysis_scheme_in_type(/* true */1, /* InProp */0, x),
                Safe_typing$ReactTemplate.empty_private_constants
              ];
      }));

var case_dep_scheme_kind_from_prop = Ind_tables$ReactTemplate.declare_individual_scheme_object("_case_dep", /* None */0, (function (_, x) {
        return /* tuple */[
                build_case_analysis_scheme_in_type(/* true */1, /* InType */2, x),
                Safe_typing$ReactTemplate.empty_private_constants
              ];
      }));

var case_dep_scheme_kind_from_prop_in_prop = Ind_tables$ReactTemplate.declare_individual_scheme_object("_casep", /* None */0, (function (_, x) {
        return /* tuple */[
                build_case_analysis_scheme_in_type(/* true */1, /* InProp */0, x),
                Safe_typing$ReactTemplate.empty_private_constants
              ];
      }));

exports.optimize_non_type_induction_scheme = optimize_non_type_induction_scheme;
exports.rect_scheme_kind_from_prop = rect_scheme_kind_from_prop;
exports.ind_scheme_kind_from_prop = ind_scheme_kind_from_prop;
exports.rec_scheme_kind_from_prop = rec_scheme_kind_from_prop;
exports.rect_scheme_kind_from_type = rect_scheme_kind_from_type;
exports.rect_dep_scheme_kind_from_type = rect_dep_scheme_kind_from_type;
exports.ind_scheme_kind_from_type = ind_scheme_kind_from_type;
exports.ind_dep_scheme_kind_from_type = ind_dep_scheme_kind_from_type;
exports.rec_scheme_kind_from_type = rec_scheme_kind_from_type;
exports.rec_dep_scheme_kind_from_type = rec_dep_scheme_kind_from_type;
exports.case_scheme_kind_from_type = case_scheme_kind_from_type;
exports.case_scheme_kind_from_prop = case_scheme_kind_from_prop;
exports.case_dep_scheme_kind_from_type = case_dep_scheme_kind_from_type;
exports.case_dep_scheme_kind_from_type_in_prop = case_dep_scheme_kind_from_type_in_prop;
exports.case_dep_scheme_kind_from_prop = case_dep_scheme_kind_from_prop;
exports.case_dep_scheme_kind_from_prop_in_prop = case_dep_scheme_kind_from_prop_in_prop;
/* rect_scheme_kind_from_type Not a pure module */
